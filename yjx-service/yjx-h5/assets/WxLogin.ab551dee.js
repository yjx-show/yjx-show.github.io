import{u as c,o as u,M as a,Q as d,$ as p,b as f,c as h}from"./index.2e944e3f.js";const m={__name:"WxLogin",setup(w){c();const l=()=>{let t=window.location.href;if(!t.includes("?"))return"";let e=t.indexOf("?")+1,o=t.substr(e).split("&"),i="";for(let r=0;r<o.length;r++){let s=o[r].split("=");s[0]==="code"&&(i=s[1])}return i};return u(()=>{let t=l();if(t===""){window.location.href=`http://yjx.yjx-show.top:7700${a.api.user.getRedirectUri}`;return}d({url:a.api.login,method:"post",data:{code:t},success(e){p.setLocationStorage("token",e);let{origin:n,pathname:o}=window.location;window.location.href=`${n}${o}#/home`}})}),(t,e)=>(f(),h("div"))}};export{m as default};
