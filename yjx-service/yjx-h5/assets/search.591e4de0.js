var Y=Object.defineProperty,Z=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var T=(o,s,e)=>s in o?Y(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,V=(o,s)=>{for(var e in s||(s={}))te.call(s,e)&&T(o,e,s[e]);if(R)for(var e of R(s))oe.call(s,e)&&T(o,e,s[e]);return o},E=(o,s)=>Z(o,ee(s));var F=(o,s,e)=>new Promise((_,d)=>{var S=r=>{try{h(e.next(r))}catch(f){d(f)}},i=r=>{try{h(e.throw(r))}catch(f){d(f)}},h=r=>r.done?_(r.value):Promise.resolve(r.value).then(S,i);h((e=e.apply(o,s)).next())});import{y as G,h as M,g as l,a1 as se,a2 as J,B as O,a3 as ae,a4 as le,G as Q,u as ne,r as re,t as ce,$ as z,a5 as ie,_ as ue,a as de,o as he,x as fe,b as y,c as v,d as t,e as j,f as N,m as B,i as ye,w as u,F as P,N as _e,S as me,U as W,R as w,j as D,k as g,l as q}from"./index.ea97895c.js";/* empty css              *//* empty css                                                          */const[ke,A]=G("tag"),pe={size:String,mark:Boolean,show:J,type:O("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var ve=M({name:ke,props:pe,emits:["close"],setup(o,{slots:s,emit:e}){const _=i=>{i.stopPropagation(),e("close",i)},d=()=>o.plain?{color:o.textColor||o.color,borderColor:o.color}:{color:o.textColor,background:o.color},S=()=>{var i;const{type:h,mark:r,plain:f,round:b,size:m,closeable:I}=o,x={mark:r,plain:f,round:b};m&&(x[m]=m);const a=I&&l(le,{name:"cross",class:[A("close"),ae],onClick:_},null);return l("span",{style:d(),class:A([x,h])},[(i=s.default)==null?void 0:i.call(s),a])};return()=>l(se,{name:o.closeable?"van-fade":void 0},{default:()=>[o.show?S():null]})}});const K=Q(ve),[Se,Ce]=G("divider"),ge={dashed:Boolean,hairline:J,contentPosition:O("center")};var xe=M({name:Se,props:ge,setup(o,{slots:s}){return()=>{var e;return l("div",{role:"separator",class:Ce({dashed:o.dashed,hairline:o.hairline,[`content-${o.contentPosition}`]:!!s.default})},[(e=s.default)==null?void 0:e.call(s)])}}});const U=Q(xe);const be=o=>{const s=ne(),e=re({closeable:!1,loading:!0,searchShow:!1,keyWord:"",historyxs:!0,historyxsList:[],popularSearchList:[]}),_=a=>{e.searchShow=!0,f(e.keyWord),o("onSearch",e.keyWord),z.isNotBlank(a)?e.keyWord=a:e.keyWord="",localStorage.setItem("search_keyword",e.keyWord);const n=s.currentRoute.value.query.backPath;s.push(n)},d=()=>{e.keyWord="",e.searchShow=!0,_("")},S=()=>F(void 0,null,function*(){const a=s.currentRoute.value.query.keyWord;z.isNotBlank(a)&&(e.keyWord=a),f("");try{const{data:n}=yield ie();e.popularSearchList=n}catch(n){e.popularSearchList=[]}e.searchShow=!1}),i=a=>{h(a)},h=a=>{e.historyxsList=localStorage.historyItems.split("|").filter(n=>n!==a).filter(n=>n!==""),localStorage.historyItems=e.historyxsList.join("|")},r=a=>{e.closeable||(e.keyWord=a,e.searchShow=!0,_(e.keyWord))},f=a=>{if(!a){if(localStorage.historyItems){let C=localStorage.historyItems.split("|").filter(L=>L!=="");C!==""&&(e.historyxsList=C)}return}a=a.trim();let{historyItems:n}=localStorage;if(n===void 0)localStorage.historyItems=a;else{const k=n.split("|").filter(C=>C!==a);k.length>0&&(n=a+"|"+k.join("|")),localStorage.historyItems=n}e.historyxsList=localStorage.historyItems.split("|").filter(k=>k!=="")},b=a=>{e.searchShow=!0,e.keyWord=a,_(e.keyWord)},m=()=>{e.historyxsList=[],localStorage.historyItems=[],e.closeable=!1},I=()=>{e.closeable=!1},x=()=>{e.closeable=!0};return E(V({},ce(e)),{onSearch:_,onCancel:d,onFocus:S,closeHistoryxs:i,clickHistoryxs:r,clickTag:b,delHistoryxsList:m,closeableClick:I,iconClick:x})};const Ie={key:1},Be=g("\u{1F525}\u70ED\u95E8\u6807\u7B7E"),We={style:{float:"left"}},we=g(" \xA0\xA0 "),Le=g("\u{1F4DD}\u641C\u7D22\u5386\u53F2"),Ne={key:0,class:"icon-in-center"},Pe={key:1,class:"icon-in-center"},$e=g(" \xA0 \xA0 "),He={style:{float:"left"}},Re=g(" \xA0\xA0 "),Te={__name:"search",emits:["onSearch"],setup(o,{emit:s}){const e=de().state.user.isNavBarShow;he(()=>{x();try{document.getElementsByClassName("van-field__control")[0].focus()}catch($){}});const{loading:_,keyWord:d,historyxs:S,closeable:i,searchShow:h,popularSearchList:r,clickTag:f,historyxsList:b,onSearch:m,onCancel:I,onFocus:x,closeHistoryxs:a,clickHistoryxs:n,delHistoryxsList:k,closeableClick:C,iconClick:L}=be(s);return($,p)=>{const X=fe("van-icon");return y(),v(P,null,[t(e)?(y(),j(t(_e),{key:0,title:"\u641C\u7D22","left-arrow":"",onClickLeft:p[0]||(p[0]=c=>t(m)(""))})):N("",!0),B("div",null,[l(t(me),{autofocus:"",modelValue:t(d),"onUpdate:modelValue":p[1]||(p[1]=c=>ye(d)?d.value=c:null),"show-action":!t(h),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onSearch:t(m),onCancel:t(I)},null,8,["modelValue","show-action","onSearch","onCancel"])]),t(h)?N("",!0):(y(),v("div",Ie,[B("div",null,[l(t(w),null,{default:u(()=>[l(t(W),{span:"16"},{default:u(()=>[l(t(U),{"content-position":"left"},{default:u(()=>[Be]),_:1})]),_:1})]),_:1}),l(t(w),null,{default:u(()=>[(y(!0),v(P,null,D(t(r),c=>(y(),v("div",We,[we,l(t(K),{size:"medium",type:"primary",onClick:H=>t(f)(c)},{default:u(()=>[g(q(c),1)]),_:2},1032,["onClick"])]))),256))]),_:1})]),B("div",null,[t(S)?(y(),j(t(w),{key:0},{default:u(()=>[l(t(W),{span:"15"},{default:u(()=>[l(t(U),{"content-position":"left"},{default:u(()=>[Le]),_:1})]),_:1}),l(t(W),{span:"8"},{default:u(()=>[t(i)?(y(),v("div",Pe,[B("a",{onClick:p[2]||(p[2]=(...c)=>t(k)&&t(k)(...c))},"\u5168\u90E8\u5220\u9664"),$e,B("a",{onClick:p[3]||(p[3]=(...c)=>t(C)&&t(C)(...c))},"\u5B8C\u6210")])):(y(),v("div",Ne,[l(X,{onClick:t(L),name:"delete"},null,8,["onClick"])]))]),_:1}),l(t(W),{span:"1"})]),_:1})):N("",!0),l(t(w),null,{default:u(()=>[(y(!0),v(P,null,D(t(b),c=>(y(),v("div",He,[Re,l(t(K),{size:"medium",closeable:t(i),color:"#cdcdcd","text-color":"#252426",onClick:H=>t(n)(c),onClose:H=>t(a)(c)},{default:u(()=>[g(q(c),1)]),_:2},1032,["closeable","onClick","onClose"])]))),256))]),_:1})])]))],64)}}};var je=ue(Te,[["__scopeId","data-v-2f253d82"]]);export{je as default};
